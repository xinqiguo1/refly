# General Configuration
NODE_ENV=development
PORT=5800
WS_PORT=5801
ORIGIN=http://localhost:5173

# Whether automatic database schema migration is enabled
AUTO_MIGRATE_DB_SCHEMA=1

# Debug Logger Configuration
# Enable debug logging to file (default: false)
DEBUG_TO_FILE=false
# Directory for debug logs (default: ./debug-logs)
DEBUG_DIR=./debug-logs
# Also output debug logs to console (default: false)
DEBUG_CONSOLE=false

# Static Endpoint Configuration
STATIC_PUBLIC_ENDPOINT=
STATIC_PRIVATE_ENDPOINT=

# Redis Configuration (REDIS_URL will be used if provided)
REDIS_URL=
REDIS_HOST=
REDIS_PORT=
REDIS_USERNAME=
REDIS_PASSWORD=
REDIS_TLS=false

# Database Configuration
DATABASE_URL=postgresql://refly:test@localhost:5432/refly?schema=refly

# Vector Store Configuration
VECTOR_STORE_BACKEND=qdrant
QDRANT_HOST=
QDRANT_PORT=
QDRANT_API_KEY=
LANCEDB_URI=

# Elasticsearch Configuration
ELASTICSEARCH_URL=
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=

# MinIO Configuration
MINIO_INTERNAL_ENDPOINT=
MINIO_INTERNAL_PORT=
MINIO_INTERNAL_USE_SSL=
MINIO_INTERNAL_ACCESS_KEY=
MINIO_INTERNAL_SECRET_KEY=
MINIO_INTERNAL_BUCKET=

MINIO_EXTERNAL_ENDPOINT=
MINIO_EXTERNAL_PORT=
MINIO_EXTERNAL_USE_SSL=
MINIO_EXTERNAL_ACCESS_KEY=
MINIO_EXTERNAL_SECRET_KEY=
MINIO_EXTERNAL_BUCKET=

# Authentication Configuration
AUTH_SKIP_VERIFICATION=true
REFLY_COOKIE_DOMAIN=
REFLY_COOKIE_SECURE=
REFLY_COOKIE_SAME_SITE=
LOGIN_REDIRECT_URL=
JWT_SECRET=
JWT_EXPIRATION_TIME=
JWT_REFRESH_EXPIRATION_TIME=

# Cloudflare Turnstile Configuration
# Enable Turnstile for human verification on login/signup (default: false for local/private deployments)
CLOUDFLARE_TURNSTILE_ENABLED=false
# Get your secret key from https://dash.cloudflare.com/
PUBLIC_CLOUDFLARE_SITE_KEY=

# Encryption Configuration
# Generate a key with: npx ts-node apps/api/src/scripts/generate-encryption-key.ts
# 32-byte (256-bit) hex-encoded key for encrypting sensitive data like provider API keys
ENCRYPTION_KEY=

# Collaboration Configuration
COLLAB_TOKEN_EXPIRY=

# Email Authentication
EMAIL_AUTH_ENABLED=true
EMAIL_SENDER=

# Resend API Key. Required if email verification is enabled.
# You can get your own key from https://resend.com/
RESEND_API_KEY=re_123

# GitHub Authentication
GITHUB_AUTH_ENABLED=false
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_CALLBACK_URL=

# Google Authentication
GOOGLE_AUTH_ENABLED=false
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=

# Skill Configuration
SKILL_IDLE_TIMEOUT=60000
SKILL_EXECUTION_TIMEOUT=180000

# Stripe Configuration
STRIPE_API_KEY=
STRIPE_ACCOUNT_WEBHOOK_SECRET=test
STRIPE_ACCOUNT_TEST_WEBHOOK_SECRET=test
STRIPE_SESSION_SUCCESS_URL=
STRIPE_SESSION_CANCEL_URL=
STRIPE_PORTAL_RETURN_URL=

# Quota Configuration
QUOTA_T1_TOKEN=-1
QUOTA_T2_TOKEN=-1
QUOTA_T1_REQUEST=-1
QUOTA_T2_REQUEST=-1
QUOTA_STORAGE_FILE=-1
QUOTA_STORAGE_OBJECT=-1
QUOTA_STORAGE_VECTOR=-1
QUOTA_FILE_PARSE_PAGE=-1

# Media Generator Configuration
REPLICATE_API_KEY=

TURBO_TEAM=
TURBO_TOKEN=
MARKER_API_KEY=
COMPOSIO_API_KEY=

# Truncate sandbox's origin stdout string to fixed length
SANDBOX_TRUNCATE_OUTPUT=200
# Sandbox S3 overlap (optional override for sandbox executor)
SANDBOX_S3_OVERLAP_ENABLED=
SANDBOX_S3_OVERLAP_ENDPOINT=
SANDBOX_S3_OVERLAP_PORT=
# Scalebox Configuration
SCALEBOX_API_KEY=
# Wrapper type: 'executor' (custom template) or 'interpreter' (official code-interpreter)
# Default: executor
SCALEBOX_WRAPPER_TYPE=interpreter
# Template name (only used when wrapperType=executor)
# Default: refly-executor-slim-v0-2-3
SCALEBOX_TEMPLATE_NAME=
# Code size threshold for switching to path mode (default: 65536 = 64KB)
SCALEBOX_CODE_SIZE_THRESHOLD=
# Sandbox timeout (default: 3600000ms = 1 hour)
SCALEBOX_SANDBOX_TIMEOUT_MS=3600000
# Maximum concurrent sandboxes in pool (default: 10)
SCALEBOX_MAX_SANDBOXES=10
# Maximum pending jobs in queue (default: 100)
SCALEBOX_MAX_QUEUE_SIZE=100
# Delay before auto-pausing idle sandbox (default: 120000ms = 2 minutes)
SCALEBOX_AUTO_PAUSE_DELAY_MS=120000
# Code execution timeout (default: 300s = 5 minutes)
SCALEBOX_RUN_CODE_TIMEOUT_SEC=300
# Max wait time for lock acquisition (default: 60s)
SCALEBOX_LOCK_WAIT_TIMEOUT_SEC=60
# Lock polling interval (default: 100ms)
SCALEBOX_LOCK_POLL_INTERVAL_MS=100
# Lock initial TTL, auto-renewed periodically (default: 10s)
SCALEBOX_LOCK_INITIAL_TTL_SEC=10
# Lock renewal interval, should be < TTL/2 (default: 3000ms)
SCALEBOX_LOCK_RENEWAL_INTERVAL_MS=3000

# OpenTelemetry Configuration
# Full URL for OTLP traces export (e.g., to Tempo via OTEL Collector)
# Example: http://localhost:4318/v1/traces
OTLP_TRACES_URL=
# Full URL for OTLP metrics export (e.g., to Prometheus via OTEL Collector)
# Example: http://localhost:4318/v1/metrics
OTLP_METRICS_URL=
# Metrics export interval in milliseconds (default: 60000 = 60 seconds)
OTLP_METRICS_INTERVAL_MS=60000
#
# Local testing with deploy/docker/trace stack:
#   OTLP_TRACES_URL=http://localhost:34318/v1/traces
#   OTLP_METRICS_URL=http://localhost:34318/v1/metrics
#   OTLP_METRICS_INTERVAL_MS=5000
# Then check: docker logs -f refly_otel_collector 2>&1 | grep http.route

# Langfuse Configuration (LLM Tracing)
# Use with deploy/docker/langfuse for self-hosted deployment
# Langfuse is enabled when LANGFUSE_BASE_URL is set
# LANGFUSE_BASE_URL=http://localhost:33001
LANGFUSE_PUBLIC_KEY=pk-lf-dev
LANGFUSE_SECRET_KEY=sk-lf-dev

# Sentry Configuration (Error Tracking)
# Get your DSN from https://sentry.io/
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# Deploy Type Configuration
# Options: cloud (default), self-hosted
# DEPLOY_TYPE=cloud

# Statsig Configuration (Feature Flags & Analytics)
# Get your key from https://console.statsig.com/
# STATSIG_SECRET_KEY=secret-xxx
